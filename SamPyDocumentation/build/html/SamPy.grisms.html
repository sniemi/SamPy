

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>grisms Package &mdash; SamPy v0.1 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="SamPy v0.1 documentation" href="index.html" />
    <link rel="next" title="herschel Package" href="SamPy.herschel.html" />
    <link rel="prev" title="SamPy.focus.PhaseretrievalresultsTinyTimACS.TinyTimResults" href="SamPy.focus.PhaseretrievalresultsTinyTimACS.TinyTimResults.html" /> 
  </head>
  <body>

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="SamPy.herschel.html" title="herschel Package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="SamPy.focus.PhaseretrievalresultsTinyTimACS.TinyTimResults.html" title="SamPy.focus.PhaseretrievalresultsTinyTimACS.TinyTimResults"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">home</a>|&nbsp;</li>
        <li><a href="search.html">search</a>|&nbsp;</li>
 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">grisms Package</a><ul>
<li><a class="reference internal" href="#module-SamPy.grisms.extract_splitless"><tt class="docutils literal"><span class="pre">extract_splitless</span></tt> Module</a></li>
<li><a class="reference internal" href="#module-SamPy.grisms.generateAssociationDB"><tt class="docutils literal"><span class="pre">generateAssociationDB</span></tt> Module</a></li>
<li><a class="reference internal" href="#module-SamPy.grisms.overplot_sextractor"><tt class="docutils literal"><span class="pre">overplot_sextractor</span></tt> Module</a></li>
<li><a class="reference internal" href="#module-SamPy.grisms.prepare_slitless"><tt class="docutils literal"><span class="pre">prepare_slitless</span></tt> Module</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="SamPy.focus.PhaseretrievalresultsTinyTimACS.TinyTimResults.html"
                        title="previous chapter">SamPy.focus.PhaseretrievalresultsTinyTimACS.TinyTimResults</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="SamPy.herschel.html"
                        title="next chapter">herschel Package</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/SamPy.grisms.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="grisms-package">
<h1>grisms Package<a class="headerlink" href="#grisms-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-SamPy.grisms.extract_splitless">
<span id="extract-splitless-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">extract_splitless</span></tt> Module<a class="headerlink" href="#module-SamPy.grisms.extract_splitless" title="Permalink to this headline">¶</a></h2>
<p>This script can be used to run aXe.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">requires:</th><td class="field-body">PyFITS</td>
</tr>
<tr class="field"><th class="field-name">requires:</th><td class="field-body">PyRAF</td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="SamPy.grisms.extract_splitless.generate_input_image_list">
<tt class="descclassname">SamPy.grisms.extract_splitless.</tt><tt class="descname">generate_input_image_list</tt><big>(</big><em>filter</em>, <em>grism</em><big>)</big><a class="headerlink" href="#SamPy.grisms.extract_splitless.generate_input_image_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Format : [name of grism image] [object catalogue] [name of direct image]
:todo: this is not robust and may find wrong images!!! Should be redone!</p>
</dd></dl>

</div>
<div class="section" id="module-SamPy.grisms.generateAssociationDB">
<span id="generateassociationdb-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">generateAssociationDB</span></tt> Module<a class="headerlink" href="#module-SamPy.grisms.generateAssociationDB" title="Permalink to this headline">¶</a></h2>
<p>This little script can be used to generate a cPickled association database that is in the format that the PHLAG grism pipeline developed by ECF will understand.</p>
<p>The script looks all FITS files in the current working
directory and tries to generate the association database
by matching direct images to grism images. Note that the
matching algorithm is extremely limited and works only if
the direct images and grism images have the same RA or DEC.
Thus, the script is only suitable for the test that will
be carried out in April 2011, as for this test all the
datasets have been hand picked.</p>
<p>This script should not be used unless its limitations
have been understood!</p>
<dl class="function">
<dt id="SamPy.grisms.generateAssociationDB.createAssociationDB">
<tt class="descclassname">SamPy.grisms.generateAssociationDB.</tt><tt class="descname">createAssociationDB</tt><big>(</big><em>grism</em>, <em>direct</em>, <em>match</em>, <em>output='ACSTEST.db'</em><big>)</big><a class="headerlink" href="#SamPy.grisms.generateAssociationDB.createAssociationDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Email from Martin Kuemmel concerning the format:</p>
<ul class="simple">
<li>Each association (see listing below contains two main entries, the
first entry (a list)  containing information on the grism images and
the second a dictionary) containing direct imaging information.</li>
<li>The grism image information is a list, which each entry consisting of
a tuple with four items. The first item is the name of the grism
image, the second item is the exposure time of the grism image,
the third item is the name of the associated direct image and the
fourth item a real number measuring the &#8216;distance&#8217; between the grism
image and the direct image. Very close pairs of grism image - direct
image have a distance of 0.0. I think there is a very complicated
formula that measures this distance, however the most important input
is the pointing on the sky. If a grism and a direct image have the
same pointing on the sky, they are very close. Also the time
difference between the direct image and the grism image has some
influence.</li>
<li>The direct image information is a dictionary that contains the filter
names as keys. For each filter there is a list of tuples with three
items. The first item is the direct image name, the second item is
the exposure time and the third item is the overlap with the area covered
by the grism images of that association. For some reason (I have forgotten),
this overlap can be more than 1.</li>
</ul>
<p>So the two &#8216;dir_min_overlap&#8217; that you quote are two different values,
the first one measuring the distance between the grism image and the
closest associated direct image (from all possible associated direct
images, the closest one is chosen), and the second one measuring the
area overlap with all grism images.</p>
<p>We did have algorithms and formulas to compute these numbers, but in
the end it was always some sort of magic with Alberto Micol and Marco
Lombardi the magicians. I asked Alberto, but he was rather involved in
NICMOS, and Marco is really far away now, his account at ESO does no
longer exists and his old computer (standing in front of me) needed a
new disk some weeks ago.</p>
<p>So I guess that we can not offer much support on this. In any case,
WFC3 is a different instrument with 2 complementary grisms and
different prescriptions for taking associated direct imaging and hence
a different basis of how data is taken.</p>
<p>Hope this helped,
Martin</p>
<p>([(&#8216;J6FL8YKUQ&#8217;, 764.0, &#8216;J6FL8YKRQ&#8217;, 0.0),
(&#8216;J6FL8YKWQ&#8217;, 764.0, &#8216;J6FL8YKRQ&#8217;, 0.0),
(&#8216;J6FL8YKYQ&#8217;, 764.0, &#8216;J6FL8YKRQ&#8217;, 0.0),
(&#8216;J6FL8YL0Q&#8217;, 764.0, &#8216;J6FL8YKRQ&#8217;, 0.0),
(&#8216;J6FL8YL2Q&#8217;, 764.0, &#8216;J6FL8YKRQ&#8217;, 0.0),
(&#8216;J6FL8YL4Q&#8217;, 764.0, &#8216;J6FL8YKRQ&#8217;, 0.0),
(&#8216;J6FL8YL6Q&#8217;, 764.0, &#8216;J6FL8YKRQ&#8217;, 0.0),
(&#8216;J6FL8YL8Q&#8217;, 764.0, &#8216;J6FL8YKRQ&#8217;, 0.0)],
{&#8216;F850LP&#8217;:
[(&#8216;J8WQ91E8Q&#8217;, 500.0, 0.89063763040941479),
(&#8216;J8WQ91EAQ&#8217;, 500.0, 0.89063763040941479),
(&#8216;J8WQ91ECQ&#8217;, 500.0, 0.89063763040941479),
(&#8216;J6FL7YIDQ&#8217;, 500.0, 0.97062910394576651),
(&#8216;J6FL8YKRQ&#8217;, 500.0, 1.011511942107943),
(&#8216;J8WQ91E7Q&#8217;, 500.0, 0.89063763040941479)]})</p>
</dd></dl>

<dl class="function">
<dt id="SamPy.grisms.generateAssociationDB.findGrismImages">
<tt class="descclassname">SamPy.grisms.generateAssociationDB.</tt><tt class="descname">findGrismImages</tt><big>(</big><em>filelist</em><big>)</big><a class="headerlink" href="#SamPy.grisms.generateAssociationDB.findGrismImages" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds all direct and grism images from a
given filelist. Will pull out some information
such as exposure time and filter from the header.
Will also record RA and DEC, this could potentially
be used to calculate the overlap and is currently
used to match images later.</p>
</dd></dl>

<dl class="function">
<dt id="SamPy.grisms.generateAssociationDB.makeDirectImageDictionary">
<tt class="descclassname">SamPy.grisms.generateAssociationDB.</tt><tt class="descname">makeDirectImageDictionary</tt><big>(</big><em>direct</em>, <em>match</em><big>)</big><a class="headerlink" href="#SamPy.grisms.generateAssociationDB.makeDirectImageDictionary" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a dictionary from the direct image information.
This dictionary is in the format that ECF used to make
their association db, so it is more or less ready to be
pickled. For details, see the comment in createAssociationDB.</p>
</dd></dl>

<dl class="function">
<dt id="SamPy.grisms.generateAssociationDB.makeGrismImageList">
<tt class="descclassname">SamPy.grisms.generateAssociationDB.</tt><tt class="descname">makeGrismImageList</tt><big>(</big><em>grism</em>, <em>match</em><big>)</big><a class="headerlink" href="#SamPy.grisms.generateAssociationDB.makeGrismImageList" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a list of grism images. This list is in the
format that ECF used to make their association db, so it
is more or less ready to be pickled. For details,
see the comment in createAssociationDB.</p>
</dd></dl>

<dl class="function">
<dt id="SamPy.grisms.generateAssociationDB.matchDirectImageToGrismImage">
<tt class="descclassname">SamPy.grisms.generateAssociationDB.</tt><tt class="descname">matchDirectImageToGrismImage</tt><big>(</big><em>direct</em>, <em>grism</em><big>)</big><a class="headerlink" href="#SamPy.grisms.generateAssociationDB.matchDirectImageToGrismImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Matches direct images to grism images in an extremely
dummy way. Will just check that either RA or DEC are
equal. This can potentially lead to crazy results as
it does not guarantee that there is overlap. Moreover,
if one has applied a tiny offset to the grism image to
for example account for the fact that the dispersion
is always towards the same direction, then this matching
would fail. One should probably use some header keyword
information such as POSTARGs together with the RA and DEC
to find the closest matches. However, for the testing
that will be performed in April 2011 this dummy way of
matching should be sufficient.</p>
</dd></dl>

</div>
<div class="section" id="module-SamPy.grisms.overplot_sextractor">
<span id="overplot-sextractor-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">overplot_sextractor</span></tt> Module<a class="headerlink" href="#module-SamPy.grisms.overplot_sextractor" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-SamPy.grisms.prepare_slitless">
<span id="prepare-slitless-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">prepare_slitless</span></tt> Module<a class="headerlink" href="#module-SamPy.grisms.prepare_slitless" title="Permalink to this headline">¶</a></h2>
<p>Prepares HST data for aXe, runs multidrizzle and SExtractor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">summary:</th><td class="field-body">This script can be used to prepare data for aXe.</td>
</tr>
</tbody>
</table>
<p>The script will create a proper file structure for aXe,
run multidrizzle for direct images, and finally run
SourceExtractor on the drizzled direct images.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">note:</th><td class="field-body">This is really badly written, should make a class...</td>
</tr>
<tr class="field"><th class="field-name">warning:</th><td class="field-body">Not really tested...</td>
</tr>
<tr class="field"><th class="field-name">author:</th><td class="field-body">Sami-Matias Niemi (<a class="reference external" href="mailto:niemi&#37;&#52;&#48;stsci&#46;edu">niemi<span>&#64;</span>stsci<span>&#46;</span>edu</a>)</td>
</tr>
<tr class="field"><th class="field-name">version:</th><td class="field-body">0.1a</td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="SamPy.grisms.prepare_slitless.find_direct_images">
<tt class="descclassname">SamPy.grisms.prepare_slitless.</tt><tt class="descname">find_direct_images</tt><big>(</big><em>dict</em>, <em>column=0</em><big>)</big><a class="headerlink" href="#SamPy.grisms.prepare_slitless.find_direct_images" title="Permalink to this definition">¶</a></dt>
<dd><p>Pick out direct images from a dictionary (that could have been
created using the &#8220;find_header_info&#8221; function). Assumes that all
images whose filter names start with an &#8220;F&#8221; are direct images.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Rreturn :</th><td class="field-body">a list of filenames that are direct images.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="SamPy.grisms.prepare_slitless.find_header_info">
<tt class="descclassname">SamPy.grisms.prepare_slitless.</tt><tt class="descname">find_header_info</tt><big>(</big><em>input_files</em><big>)</big><a class="headerlink" href="#SamPy.grisms.prepare_slitless.find_header_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Find filter, date of the observation and exposure time information
from the FITS header. Assumes that this information has been stored
in the first extension header, like in case of HST.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">Returns a dictionary where each key is the filename and
value is a list of filter, data-obs and exptime.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="SamPy.grisms.prepare_slitless.fixSourceExtractorCatalogue">
<tt class="descclassname">SamPy.grisms.prepare_slitless.</tt><tt class="descname">fixSourceExtractorCatalogue</tt><big>(</big><em>filter</em>, <em>pivot</em><big>)</big><a class="headerlink" href="#SamPy.grisms.prepare_slitless.fixSourceExtractorCatalogue" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="SamPy.grisms.prepare_slitless.make_ds9_regions_file">
<tt class="descclassname">SamPy.grisms.prepare_slitless.</tt><tt class="descname">make_ds9_regions_file</tt><big>(</big><em>inputfile</em>, <em>outputfile</em>, <em>size=10</em>, <em>xcolumn='x_image'</em>, <em>ycolumn='y_image'</em><big>)</big><a class="headerlink" href="#SamPy.grisms.prepare_slitless.make_ds9_regions_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="SamPy.grisms.prepare_slitless.print_files">
<tt class="descclassname">SamPy.grisms.prepare_slitless.</tt><tt class="descname">print_files</tt><big>(</big><em>headers</em><big>)</big><a class="headerlink" href="#SamPy.grisms.prepare_slitless.print_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Outputs some basic information to the shell.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="SamPy.herschel.html" title="herschel Package"
             >next</a> |</li>
        <li class="right" >
          <a href="SamPy.focus.PhaseretrievalresultsTinyTimACS.TinyTimResults.html" title="SamPy.focus.PhaseretrievalresultsTinyTimACS.TinyTimResults"
             >previous</a> |</li>
        <li><a href="index.html">home</a>|&nbsp;</li>
        <li><a href="search.html">search</a>|&nbsp;</li>
 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Sami-Matias Niemi.
    </div>
  </body>
</html>